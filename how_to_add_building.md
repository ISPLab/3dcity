Процесс добавления модели дома в 3DCityDB и отображения на карте
Шаг 1: Подготовка модели здания
Сначала вам нужна модель в формате CityGML:
Если модель уже в формате CityGML - отлично
Если модель в другом формате (например, IFC, Revit, SketchUp):
Используйте конвертеры, например FME, IfcExplorer, или SketchUp CityGML плагин
Убедитесь, что модель имеет геопривязку (координаты в реальном мире)
Настройте нужный уровень детализации (LoD)
Шаг 2: Импорт модели в базу данных 3DCityDB
Apply to README.md
Run
"
Шаг 3: Экспорт модели в формат для визуализации
Apply to README.md
Run
"
Шаг 4: Размещение экспортированных файлов
Создайте папку в веб-доступном месте (например, на вашем локальном веб-сервере)
Скопируйте все экспортированные файлы в эту папку
Запомните URL вашего мастер-JSON файла (обычно что-то вроде http://localhost/3d-models/экспорт_дома/master.json)
Шаг 5: Отображение модели в Web Map Client
Откройте 3DCityDB Web Map Client: http://localhost:8000/3dwebclient/index.html
Добавьте новый слой:
Нажмите кнопку "Toolbox" в левом верхнем углу
Выберите "Add Layer"
Заполните форму:
Name: "Мой дом"
URL: укажите URL к JSON-файлу с вашей моделью
Layer Type: выберите "COLLADA/KML/glTF"
Отметьте "Active" для показа слоя
Нажмите "Add"
Шаг 6: Настройка тематических данных (опционально)
Для отображения дополнительной информации при клике:
Настройте PostgREST:
Apply to README.md
Run
postgrest
В настройках слоя в Web Map Client:
Вернитесь к настройкам слоя
В поле "Spreadsheet URL" введите URL к вашему PostgREST API:
http://localhost:3000/cityobject или другая таблица с атрибутами
Советы по отладке
Если модель не видна, проверьте координаты камеры и перейдите в нужную область
Проверьте, что все файлы экспорта доступны по указанному URL
Проверьте консоль браузера на наличие ошибок загрузки ресурсов
Убедитесь, что у вас установлена поддержка WebGL в браузере
При успешном выполнении всех шагов, вы увидите вашу 3D-модель дома на карте Web Map Client с возможностью интерактивного взаимодействия.